(this.webpackJsonplab3=this.webpackJsonplab3||[]).push([[0],{56:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var i=n(21),c=n.n(i),r=(n(56),n(0)),a=(n(39),n(25)),s=n(26),j=n(14),d=n(1);var u=function(){return Object(d.jsx)("header",{children:Object(d.jsxs)(a.a,{border:"bottom",children:[Object(d.jsx)(a.a.Brand,{children:"Recipes"}),Object(d.jsx)(a.a.Toggle,{}),Object(d.jsx)(a.a.Collapse,{id:"basic-navbar-nav",children:Object(d.jsxs)(s.a,{className:"mr-auto",children:[Object(d.jsx)(s.a.Link,{as:j.b,to:"/",children:"Home"}),Object(d.jsx)(s.a.Link,{as:j.b,to:"/upsert/new",children:"New Recipe"}),Object(d.jsx)(s.a.Link,{as:j.b,to:"/ingredients",children:"Ingredients"})]})})]})})},l=n(22),o=n.n(l),b=n(28),h=n(13),O=n(17),p=n(6),x=n(10);var f=function(e){return Object(d.jsxs)("div",{className:"recipe",children:[Object(d.jsx)("h1",{children:e.name}),Object(d.jsx)(x.a,{onClick:function(){e.onDelete(e.id)},variant:"danger",children:"Delete"}),Object(d.jsx)(x.a,{onClick:function(){e.onEdit(e.id)},variant:"primary",children:"Edit"})]})},m=n(30),g=n.n(m);var v=function(){var e=Object(r.useState)(),t=Object(h.a)(e,2),n=t[0],i=t[1],c=Object(p.f)();function a(e){fetch("http://localhost:5000/api/"+e,{method:"DELETE"}).then((function(){window.location.reload()}))}function s(e){c.push("/upsert/"+e)}return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()("/api");case 2:t=e.sent,i(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(d.jsx)(O.a,{children:n&&n.recipes.map((function(e){return Object(d.jsx)(f,{name:e.name,id:e.id,onDelete:a,onEdit:s})}))})},y=n(20),N=n(11),w=n(33),q=n(24);var C=function(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:e.name}),Object(d.jsx)("td",{children:e.quantity}),Object(d.jsx)("td",{children:e.unit}),Object(d.jsx)("td",{children:Object(d.jsx)(x.a,{onClick:function(){e.onDelete(e.id)},variant:"danger",children:"Delete"})})]})};var S=function(e){var t=Object(r.useState)({ingredientName:"",ingredientQuantity:0,ingredientUnit:""}),n=Object(h.a)(t,2),i=n[0],c=n[1],a=""===i.ingredientName||""===i.ingredientUnit||i.ingredientQuantity<=0||!isNaN(i.ingredientName);function s(e){var t=e.target,n=t.name,i=t.value;c((function(e){return Object(N.a)(Object(N.a)({},e),{},Object(y.a)({},n,i))}))}return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)("input",{name:"ingredientName",type:"text",value:i.name,onChange:s})}),Object(d.jsx)("td",{children:Object(d.jsx)("input",{name:"ingredientQuantity",type:"number",min:"0",step:"0.001",value:i.quantity,onChange:s})}),Object(d.jsx)("td",{children:Object(d.jsx)("input",{name:"ingredientUnit",type:"text",value:i.unit,onChange:s})}),Object(d.jsx)("td",{children:Object(d.jsx)(x.a,{type:"button",onClick:function(t){e.onAdd(i),t.preventDefault()},variant:"primary",disabled:a,children:"Add Ingredient"})})]})};var k=function(){var e=Object(p.g)().id,t=Object(r.useState)(!0),n=Object(h.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)({name:"",recipe:"",ingredients:[]}),s=Object(h.a)(a,2),j=s[0],u=s[1],l=Object(r.useState)({name:[],quantity:[],unit:[]}),o=Object(h.a)(l,2),b=o[0],f=o[1];Object(r.useEffect)((function(){var t=new AbortController;return console.log(" the id is :"+e),fetch("http://localhost:5000/api/"+e,{signal:t.signal}).then((function(e){return e.json()})).then((function(t){0!==Object.keys(t).length?(u(t),t.ingredients.map((function(e){for(var t=e.split(" "),n="",i="",c="",r=!0,a=0;a<t.length;a++)isNaN(t[a])||!r?r?""===n?n=t[a]:n+=" "+t[a]:""===c?c=t[a]:n+=" "+t[a]:(i=t[a],r=!1);f((function(e){return{name:[].concat(Object(w.a)(e.name),[n]),quantity:[].concat(Object(w.a)(e.quantity),[i]),unit:[].concat(Object(w.a)(e.unit),[c])}}))}))):"new"!==e&&m.push("/"),c(!1)})),function(){return t.abort()}}),[]);var m=Object(p.f)();function g(e){u((function(t){var n=t.ingredients.filter((function(t,n){return n!==e}));return Object(N.a)(Object(N.a)({},t),{},{ingredients:n})})),f((function(t){return{name:t.name.filter((function(t,n){return n!==e})),quantity:t.quantity.filter((function(t,n){return n!==e})),unit:t.unit.filter((function(t,n){return n!==e}))}}))}function v(e){var t=e.target,n=t.name,i=t.value;u((function(e){return Object(N.a)(Object(N.a)({},e),{},Object(y.a)({},n,i))}))}return Object(d.jsx)("div",{children:!i&&Object(d.jsx)(O.a,{children:Object(d.jsxs)("div",{className:"upsert",children:[Object(d.jsxs)("h1",{children:["new"===e?"Add new":"Update existing"," recipe"]}),Object(d.jsxs)("form",{onSubmit:function(t){t.preventDefault(),""===j.name||""===j.recipe||0===j.ingredients.length||(u((function(e){return Object(N.a)(Object(N.a)({},e),{},{recipe:e.recipe.split("\n")})})),"new"===e?fetch("http://localhost:5000/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)}).then((function(){m.push("/")})):(console.log("now trying to edit:"),console.log(j),fetch("http://localhost:5000/api/"+e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)}).then((function(){m.push("/")}))))},children:[Object(d.jsx)("label",{children:"Name:"}),Object(d.jsx)("input",{name:"name",type:"text",required:!0,value:j.name,onChange:v}),Object(d.jsx)("label",{children:"Recipe:"}),Object(d.jsx)("textarea",{name:"recipe",type:"text",required:!0,value:j.recipe,onChange:v}),Object(d.jsx)(O.a,{children:Object(d.jsxs)(q.a,{striped:!0,bordered:!0,hover:!0,children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Ingredient"}),Object(d.jsx)("th",{children:"Quantity"}),Object(d.jsx)("th",{children:"Unit"}),Object(d.jsx)("th",{})]})}),Object(d.jsxs)("tbody",{children:[j&&j.ingredients.map((function(e,t){return Object(d.jsx)(C,{name:b.name[t],quantity:b.quantity[t],unit:b.unit[t],id:t,onDelete:g})})),Object(d.jsx)(S,{onAdd:function(e){var t=j.ingredients,n=b;if(b.name.includes(e.ingredientName)){var i=b.name.indexOf(e.ingredientName);t[i]=e.ingredientName+" "+e.ingredientQuantity+" "+e.ingredientUnit,n.quantity[i]=e.ingredientQuantity,n.unit[i]=e.ingredientUnit}else t.push(e.ingredientName+" "+e.ingredientQuantity+" "+e.ingredientUnit),n.name.push(e.ingredientName),n.quantity.push(e.ingredientQuantity),n.unit.push(e.ingredientUnit);u((function(e){return Object(N.a)(Object(N.a)({},e),{},{ingredients:t})})),f(n)}})]})]})}),Object(d.jsxs)(x.a,{type:"submit",children:["new"===e?"Add new":"Update"," recipe"]})]})]})})})};var U=function(){var e=Object(r.useState)(),t=Object(h.a)(e,2),n=t[0],i=t[1];Object(r.useEffect)((function(){(function(){var e=Object(b.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()("/api");case 2:t=e.sent,i(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var c=Object(r.useState)(!1),a=Object(h.a)(c,2),s=a[0],j=a[1];return Object(d.jsxs)(O.a,{children:[Object(d.jsxs)("div",{className:"ingredients",children:[Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault();for(var t=[],i=0;i<n.recipes.length;i++)if(console.log(),0!==parseFloat(e.target[i].value)&&!isNaN(parseFloat(e.target[i].value)))for(var c=0;c<n.recipes[i].ingredients.length;c++){for(var r,a=n.recipes[i].ingredients[c].split(" "),s="",d="",u=!0,l=!1,o=0;o<a.length;o++)isNaN(a[o])||!u?u?""===s?s=a[o]:s+=" "+a[o]:""===d?d=a[o]:s+=" "+a[o]:(r=parseFloat(a[o])*parseFloat(e.target[i].value),u=!1);for(var b=0;b<t.length;b++)t[b].name===s&&t[b].unit===d&&(t[b].quantity+=r,l=!0);l||t.push({name:s,quantity:r,unit:d})}j(t.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})))},children:[Object(d.jsxs)(q.a,{striped:!0,bordered:!0,hover:!0,children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{className:"name",children:"Recipe Name"}),Object(d.jsx)("th",{className:"value",children:"Ammount"})]})}),Object(d.jsx)("tbody",{children:n&&n.recipes.map((function(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{className:"name",children:e.name}),Object(d.jsx)("td",{className:"value",children:Object(d.jsx)("input",{name:e.name,type:"number",min:"0"})})]})}))})]}),Object(d.jsx)(x.a,{type:"submit",children:"Calculate ingredients"})]}),s&&Object(d.jsx)("form",{onSubmit:function(e){e.preventDefault(),j(!1)},children:Object(d.jsx)(x.a,{type:"submit",variant:"secondary",children:"Clear"})})]}),s&&Object(d.jsx)(O.a,{children:Object(d.jsxs)(q.a,{striped:!0,bordered:!0,hover:!0,children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Ingredient"}),Object(d.jsx)("th",{children:"Quantity"}),Object(d.jsx)("th",{children:"Unit"})]})}),Object(d.jsx)("tbody",{children:s.map((function(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:e.name}),Object(d.jsx)("td",{children:e.quantity}),Object(d.jsx)("td",{children:e.unit})]})}))})]})})]})};n(50);var D=function(){return Object(d.jsx)(j.a,{children:Object(d.jsxs)("div",{children:[Object(d.jsx)(u,{}),Object(d.jsxs)(p.c,{children:[Object(d.jsx)(p.a,{exact:!0,path:"/",children:Object(d.jsx)(v,{})}),Object(d.jsx)(p.a,{exact:!0,path:"/upsert/:id",children:Object(d.jsx)(k,{})}),Object(d.jsx)(p.a,{exact:!0,path:"/ingredients",children:Object(d.jsx)(U,{})})]})]})})};c.a.render(Object(d.jsx)(D,{}),document.getElementById("root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.b83602b1.chunk.js.map